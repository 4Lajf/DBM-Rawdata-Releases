{
  "name": "autorole",
  "permissions": "NONE",
  "restriction": "1",
  "_id": "DtBMG",
  "actions": [
    {
      "member": "1",
      "varName": "",
      "permission": "MANAGE_ROLES",
      "iftrue": "0",
      "iftrueVal": "",
      "iffalse": "1",
      "iffalseVal": "",
      "name": "Check Member Permissions"
    },
    {
      "info": "19",
      "storage": "1",
      "varName2": "botPrefix",
      "name": "Store Bot Client Info"
    },
    {
      "behavior": "1",
      "interpretation": "1",
      "code": "const botPrefix = tempVars('botPrefix');\nvar reactionArray = [];\nvar rectarray = globalVars('reactionRoleInf');\nconst _this = this;\nvar tempRole;\nvar emojiArray = [];\nvar roleArray = [];\n\nmsg.channel.send(`Bienvenue sur l'interface du syst√®me de r√¥le reaction !\\nA pr√©sent, veuillez mentionner un r√¥le ou son nom (passage sensible) ainsi que l'emojii qui servira de r√©action !.\\nEx. @notif üîî`)\n    .then((message) => {\n        msg.channel.awaitMessages(response => response.author.id == msg.author.id, {\n                max: 1,\n                time: 60000,\n                errors: ['time'],\n            })\n            .then(async function(collected) {\n                msg.author.lastMessage.delete();\n                if (collected.first().content.split(/ +/g).length > 1) {\n                    if (collected.first().content.split(/ +/g)[0] != null) {\n                        const tstValidRole = await msg.guild.roles.find(role => role.name === collected.first().content.split(/ +/g)[0]);\n                        if (collected.first().mentions.roles.first() || tstValidRole != null) {\n                            var unicodeStored = collected.first().content.split(/ +/g)[1];\n                            var roleMentioned;\n                            if (collected.first().mentions.roles.first() != null) {\n                                roleMentioned = collected.first().mentions.roles.first();\n                            } else {\n                                roleMentioned = tstValidRole;\n                            }\n                            if (unicodeStored.charCodeAt(0 > 127)) {\n                                reactionArray.push([unicodeStored, roleMentioned.id, roleMentioned.name]);\n                                emojiArray.push(unicodeStored);\n                                roleArray.push(roleMentioned.id);\n                                message.edit(`Vous avez reli√© le r√¥le ${roleMentioned.name} √† l'√©mojii ${unicodeStored}.\\nSi cela est correct, veuillez √©crire \"confirm\".\\nSi non, veuillez √©crire \"cancel\" pour annuler la saisie.`);\n                                msg.channel.awaitMessages(response => response.author.id == msg.author.id, {\n                                        max: 1,\n                                        time: 60000,\n                                        errors: ['time'],\n                                    })\n                                    .then((collected) => {\n                                        msg.author.lastMessage.delete();\n                                        if (collected.first().content.toLowerCase() == \"confirm\") {\n                                            reAsk(message)\n                                        } else if (collected.first().content.toLowerCase() == \"cancel\") {\n                                            message.delete();\n                                            msg.channel.send(\"La saisie √† √©t√© annul√©e.\\nS'il vous plait r√©p√©tez la commande pour recommencer !\");\n                                        } else {\n                                            message.delete();\n                                            msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas fournis une r√©ponse valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                                        }\n                                    }).catch(() => {\n                                        message.delete();\n                                        msg.channel.send(\"D√©sol√©, vous n'avez pas fournis une r√©ponse valide √† temps !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                                    });\n                            } else {\n                                message.delete();\n                                msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas indiquer un emoji correct !\\nS'il vous plait veuillez r√©p√©ter la commande afin de recommencer\");\n                            }\n\n                        } else {\n                            message.delete();\n                            msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas fournis une r√©ponse valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                        }\n                    } else {\n                        message.delete();\n                        msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas fournis un r√¥le valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                    }\n                } else {\n                    message.delete();\n                    msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas fournis un emoji/r√¥le valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                }\n            }).catch((error) => {\n                console.log(error);\n                message.delete();\n                                      msg.channel.send(\"D√©sol√©, vous n'avez pas fournis une r√©ponse valide √† temps\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n            });\n    })\n\nfunction reAsk(message) {\n    if (reactionArray.length != 10) {\n        var finalText = \"\";\n        reactionArray.forEach(subarray => {\n            finalText = finalText + `${subarray[0]} => ${subarray[2]}\\n`\n        })\n        message.edit(`Jusqu'√† pr√©sent, vous avez les connexions suivantes (Max 10)\\n ${finalText}\\n\\nsi vous voulez inclure une autre reaction r√¥le, veuillez ins√©rer un autre r√¥le avec un emoji.\\nSi non, veuillez √©crire \"done\".\\nSi vous voulez annuler la saisie, veuillez r√©pondre par \"cancel\"`);\n        msg.channel.awaitMessages(response => response.author.id == msg.author.id, {\n                max: 1,\n                time: 60000,\n                errors: ['time'],\n            })\n            .then(async function(collected) {\n                msg.author.lastMessage.delete();\n                if (collected.first().content.toLowerCase() == \"done\") {\n                    done(message)\n                } else if (collected.first().mentions.roles.first() == \"cancel\") {\n                    message.delete();\n                    msg.channel.send(\"la saisie √† √©t√© annul√©e.\\nVeuillez r√©p√©ter la commande afin de recommencer !\");\n                } else {\n                    if (collected.first().content.split(/ +/g).length > 1) {\n                        const tstValidRole = await msg.guild.roles.find(role => role.name === collected.first().content.split(/ +/g)[0]);\n                        if (collected.first().mentions.roles.first() || tstValidRole != null) {\n                            var unicodeStored = collected.first().content.split(/ +/g)[1];\n                            if (collected.first().mentions.roles.first() != null) {\n                                roleMentioned = collected.first().mentions.roles.first();\n                            } else {\n                                roleMentioned = tstValidRole;\n                            }\n                            if (unicodeStored != null) {\n                                if (!emojiArray.includes(unicodeStored)) {\n                                    if (!roleArray.includes(roleMentioned.id)) {\n                                        if (unicodeStored.charCodeAt(0 > 127)) {\n                                            reactionArray.push([unicodeStored, roleMentioned.id, roleMentioned.name]);\n                                            emojiArray.push(unicodeStored);\n                                            roleArray.push(roleMentioned.id);\n                                            reAsk(message)\n                                        } else {\n                                            message.delete();\n                                            msg.channel.send(\"La saisie √† √©t√© annul√©e, Vous utilisez le m√™me emoji pour le m√™me r√¥le !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                                        }\n                                    } else {\n                                        message.delete();\n                                        msg.channel.send(\"La saisie √† √©t√© annul√©e, Vous utilisez le m√™me r√¥le deux fois !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                                    }\n                                } else {\n                                    message.delete();\n                                    msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas int√©gr√© un emoji valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                                }\n                            }\n                        } else {\n                            message.delete();\n                            msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas saisie un r√¥le valide !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                        }\n                    } else {\n                        message.delete();\n                        msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas mentionner de r√¥le ou int√©gr√© d'emoji !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n                    }\n                }\n            }).catch(() => {\n                message.delete();\n                msg.channel.send(\"D√©sol√©, vous n'avez pas sp√©cifi√© une r√©ponse dans les temps !\\nS'il vous plait, veuillez r√©p√©ter la commande afin de recommencer !\");\n            });\n    } else {\n        done(message);\n    }\n\n}\n\nfunction done(message) {\n    var finalText = \"\";\n    reactionArray.forEach(subarray => {\n        finalText = finalText + `${subarray[0]} => ${subarray[2]}\\n`\n    })\n    message.edit(`Menu de mise en page final !\\n\\nVoici la liste des r√©actions et des r√¥les:\\n${finalText}\\n\\nSi cette liste est correct, veuillez mentionner le channel ou le message sera envoy√© !\\nSi cela n'est pas correct, √©crivez \"cancel\" pour annuler la saisie.`)\n    msg.channel.awaitMessages(response => response.author.id == msg.author.id, {\n            max: 1,\n            time: 60000,\n            errors: ['time'],\n        })\n        .then((collected) => {\n            msg.author.lastMessage.delete();\n            if (collected.first().mentions.channels.first()) {\n                var menchannel = collected.first().mentions.channels.first()\n                message.delete();\n                menchannel.send({\n                        embed: {\n                            color: 0xffff00,\n                            title: \"Menu de r√¥le r√©action:\",\n                            description: `R√©agissez avec les r√©actions inscrites ci dessous pour obtenir les r√¥les associ√©s !\\n${finalText}`,\n                            timestamp: new Date()\n                        }\n                    })\n                    .then(embedmessage => {\n                        reactionArray.forEach(async function(subarray) {\n                            await embedmessage.react(subarray[0])\n                        });\n                        rectarray.push({\n                            [embedmessage.id]: reactionArray\n                        });\n                        _this.storeValue(rectarray, 3, \"reactionRoleInf\", cache);\n                    });\n            } else if (collected.first().content == \"cancel\") {\n                message.delete();\n                msg.channel.send(\"La saisie √† √©t√© annul√©e.\\nS'il vous plait r√©p√©tez la commande pour recommencer !\");\n            } else {\n                message.delete();\n                msg.channel.send(\"La saisie √† √©t√© annul√©e, vous n'avez pas indiqu√© une r√©ponse valide !\\nS'il vous plait r√©p√©tez la commande pour recommencer\");\n            }\n        }).catch(() => {\n            message.delete();\n            msg.channel.send(\"Vous n'avez pas sp√©cifi√© une r√©ponse valide √† temps !\\nS'il vous plait r√©p√©tez la commande pour recommencer !\");\n        });\n}",
      "storage": "0",
      "varName": "",
      "name": "Run Script"
    }
  ],
  "comType": "0"
}